---
// src/layouts/AppWrapper.astro
import AppHead from '../components/AppHead.astro';
import { getLangFromUrl } from '../i18n';

interface Props {
  // SEO Props
  title: string; // Specific page title, defaults to SITE_TITLE
  description: string; // Specific page description, defaults to SITE_DESCRIPTION
  ogImage?: string; // Full URL for Open Graph image for the page
  ogType?: string; // e.g., 'website', 'article'
  twitterCard?: 'summary' | 'summary_large_image' | 'app' | 'player'; // Twitter card type
  bodyClass?: string;
  lang?: string; // Language code
  alternates?: Array<{ hrefLang: string; href: string }>; // hreflang alternates
}

const {
  title,
  description,
  ogImage,
  ogType = 'website',
  twitterCard = 'summary_large_image',
  bodyClass = 'min-h-screen bg-base-100 text-base-content', // Default body styling
  lang,
  alternates = [],
} = Astro.props;

// For Open Graph URL, use the current page's URL
const currentUrl = Astro.url.href;
const currentLang = lang || getLangFromUrl(Astro.url);
---

<!doctype html>
<html lang={currentLang} class="dark">
  <head>
    <AppHead
      title={title}
      description={description}
      ogImage={ogImage}
      ogType={ogType}
      twitterCard={twitterCard}
      canonicalUrl={currentUrl}
      siteName="See in the Sea"
      locale={currentLang === 'it' ? 'it_IT' : 'en_GB'}
      alternates={alternates}
    />
  </head>
  <body class={bodyClass}>
    <slot />
  </body>
</html>
