---
type Props = {
  contestId: string;
};

const { contestId } = Astro.props;

if (!Astro.locals.runtime.env.DB) {
  throw new Error('DB is not available');
}

import { eq } from 'drizzle-orm';
import { getDb } from '../../db/index.js';
import { judges } from '../../db/schema.js';

const db = getDb(Astro.locals.runtime.env.DB);

// Get judges for the specified contest
const contestJudges = await db
  .select({ fullName: judges.fullName })
  .from(judges)
  .where(eq(judges.contestId, contestId))
  .orderBy(judges.fullName);
---

<div class="mt-12 space-y-4 bg-slate-800/60 py-6">
  <h2 class="text-3xl font-light tracking-widest text-center">JURY</h2>
  <ul
    class="text-2xl flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-10 text-gray-300"
  >
    {
      contestJudges.map(judge => (
        <li class="font-extralight">{judge.fullName}</li>
      ))
    }
  </ul>
</div>

